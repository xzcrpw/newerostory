<!DOCTYPE html>
<!-- Додано x-data та :lang -->
<html lang="uk" x-data :lang="$store.i18n.selectedLang">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title використовує i18n -->
    <title x-text="`${$store.i18n.t('premium.title')} — ${$store.i18n.t('general.copyright')}`"></title>

    <!-- Мета-теги використовують i18n -->
    <meta name="description" :content="$store.i18n.t('premium.metaDescription')">
    <meta property="og:title" :content="`${$store.i18n.t('premium.title')} — ${$store.i18n.t('general.copyright')}`">
    <meta property="og:description" :content="$store.i18n.t('premium.metaOgDescription')">
    <meta property="og:image" content="https://source.unsplash.com/random/1200x630/?gold,luxury">
    <meta property="og:type" content="website">

    <!-- Шрифти -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">

    <!-- Internationalization -->
    <script type="module" src="js/i18n.js" defer></script> <!-- Важливо: type="module" -->

    <!-- API Config & Utils -->
    <script src="js/api-config.js" defer></script>
    <script src="js/api-utils.js" defer></script>

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- API Config & Utils -->
    <script src="js/api-config.js" defer></script>
    <script src="js/api-utils.js" defer></script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/premium_page.css">

    <!-- Вбудовані стилі видалено, оскільки вони тепер в premium_page.css -->

</head>
<body x-data="{
    // --- Стани UI ---
    isLoggedIn: false,
    isLoadingPlans: true,
    isLoadingUserStatus: true,
    plansError: null,
    userStatusError: null,
    currentStep: 1, // 1: вибір, 2: оплата, 3: підтвердження
    activePaymentMethod: 'card',
    isProcessingPayment: false,
    paymentError: null,
    couponError: null,
    couponSuccessMessage: null,
    isApplyingCoupon: false,
    notificationVisible: false,
    notificationMessage: '',
    notificationType: 'success', // Додано
    notificationTimeout: null,
    cardError: { number: '', name: '', expiry: '', cvc: '' },

    // --- Дані ---
    plans: [],
    selectedPlanSlug: null,
    isYearlyBilling: false,
    userSubscription: null,
    couponCode: '',
    appliedCoupon: null,
    paymentResult: null,

    // --- Платіжні дані ---
    card: { number: '', name: '', expiry: '', cvc: '' },
    termsAgreed: false,
    selectedCrypto: 'BTC',
    cryptoAddress: '',
    cryptoAmount: '',

    // --- Обчислювані властивості ---
    get selectedPlan() {
        return this.plans.find(p => p.slug === this.selectedPlanSlug) || null;
    },
    get currentPlanPriceDetails() {
        const plan = this.selectedPlan;
        if (!plan) return { price: 0, period: '', rawPrice: 0, couponDiscount: 0, yearlySavingsPercent: 0 };
        const price = this.isYearlyBilling ? (plan.yearlyPrice || 0) : (plan.monthlyPrice || 0);
        const periodKey = this.isYearlyBilling ? 'premium.perYear' : 'premium.perMonth';
        const period = this.$store?.i18n?.t(periodKey) || (this.isYearlyBilling ? '/рік' : '/місяць');
        let finalPrice = price;
        let discountAmount = 0;
        if (this.appliedCoupon) {
            if (this.appliedCoupon.discountType === 'percentage') { discountAmount = Math.round(price * (this.appliedCoupon.discountValue / 100)); }
            else if (this.appliedCoupon.discountType === 'fixed') { discountAmount = this.appliedCoupon.discountValue; }
            finalPrice = Math.max(0, price - discountAmount);
        }
        let yearlySavingsPercent = 0;
        if (this.isYearlyBilling && plan.monthlyPrice && plan.yearlyPrice && plan.monthlyPrice > 0) {
            const yearlyCostMonthly = plan.monthlyPrice * 12;
            if (yearlyCostMonthly > plan.yearlyPrice) yearlySavingsPercent = Math.round(((yearlyCostMonthly - plan.yearlyPrice) / yearlyCostMonthly) * 100);
        }
        return { price: finalPrice, period: period, rawPrice: price, couponDiscount: discountAmount, yearlySavingsPercent: yearlySavingsPercent };
    },
    get currentPlanName() {
        const plan = this.selectedPlan;
        if (!plan) return this.$store?.i18n?.t('premium.planNotSelected') || 'План не обрано';
        return this.$store?.i18n?.t(plan.nameKey) || plan.slug; // Використовуємо nameKey
    },
    validateCardForm() {
        this.cardError = { number: '', name: '', expiry: '', cvc: '' };
        let isValid = true;
        const cardNumber = this.card.number.replace(/\s/g, '');
        const i18n = this.$store?.i18n; // Отримуємо i18n

        if (!cardNumber || cardNumber.length < 13 || cardNumber.length > 19 || !/^\d+$/.test(cardNumber)) { this.cardError.number = i18n?.t('premium.errorCardNumber') || 'Некоректний номер картки'; isValid = false; }
        if (!this.card.name.trim()) { this.cardError.name = i18n?.t('premium.errorCardName') || 'Введіть ім\'я власника'; isValid = false; }
        if (!/^(0[1-9]|1[0-2])\/?([0-9]{2})$/.test(this.card.expiry)) { this.cardError.expiry = i18n?.t('premium.errorCardExpiry') || 'Некоректна дата (MM/YY)'; isValid = false; }
        else {
            const [month, year] = this.card.expiry.split('/'); const expiryDate = new Date(parseInt(`20${year}`, 10), parseInt(month, 10), 1); const currentDate = new Date(); currentDate.setDate(1); currentDate.setHours(0,0,0,0);
            if (expiryDate <= currentDate) { this.cardError.expiry = i18n?.t('premium.errorCardExpiryPast') || 'Термін дії картки минув'; isValid = false; }
        }
        if (!/^[0-9]{3,4}$/.test(this.card.cvc)) { this.cardError.cvc = i18n?.t('premium.errorCardCVC') || 'Некоректний CVC'; isValid = false; }
        if (!this.termsAgreed) { this.paymentError = i18n?.t('premium.errorTermsRequired') || 'Погодьтеся з умовами'; isValid = false; }
        return isValid;
    },
    get isCryptoFormValid() { return this.cryptoAddress && this.cryptoAmount && this.termsAgreed; },

    // --- Сповіщення (має бути глобальним) ---
    showNotification(message, isSuccess = true) {
        this.notificationMessage = message;
        this.notificationType = isSuccess ? 'success' : 'error';
        const notificationElement = document.getElementById('global-notification');
        if (notificationElement) {
             notificationElement.classList.remove('success', 'error');
             notificationElement.classList.add(this.notificationType);
             notificationElement.classList.add('show');
        }
        this.notificationVisible = true;
        if (this.notificationTimeout) clearTimeout(this.notificationTimeout);
        this.notificationTimeout = setTimeout(() => {
            this.notificationVisible = false;
             const el = document.getElementById('global-notification');
             if (el) el.classList.remove('show');
        }, 4000);
    },

    // --- Методи ---
    async init() {
        try { this.isLoggedIn = api.utils.isAuthenticated(); }
        catch (error) { console.error('Auth check error:', error); this.isLoggedIn = false; }
        this.isLoadingPlans = true; this.isLoadingUserStatus = true;

        // Чекаємо i18n
        let waitCount = 0;
        while ((typeof $store === 'undefined' || !$store.i18n?.initialized) && waitCount < 50) {
            await new Promise(resolve => setTimeout(resolve, 100)); waitCount++;
        }
        if (typeof $store === 'undefined' || !$store.i18n?.initialized) console.error('i18n store failed to initialize!');

        document.addEventListener('languageChanged', () => {
            console.log('Language changed detected in premium page.');
            // Оновлюємо UI, який залежить від перекладів (назви планів, переваги і т.д.)

// Можливо, потрібно буде оновити деякі обчислювані властивості, якщо вони кешують переклади
this.$nextTick(() => {
// Примусове оновлення, якщо потрібно (зазвичай не потрібно)
// this.plans = [...this.plans];
});
});

try {
await Promise.all([
this.fetchPlans().catch(error => { console.error('Error fetching plans:', error); this.plansError = error.message || this.$store?.i18n?.t('premium.loadingPlansError') || 'Помилка завантаження планів'; }),
this.isLoggedIn ? this.fetchUserSubscriptionStatus().catch(error => {
console.error('Error fetching subscription status:', error);
if (!error.message.toLowerCase().includes('not found') && !error.message.includes('404')) { this.userStatusError = error.message || this.$store?.i18n?.t('premium.loadingSubscriptionError') || 'Помилка статусу підписки'; }
}) : Promise.resolve()
]);
if (this.plans.length > 0 && !this.selectedPlanSlug) {
const defaultPlan = this.plans.find(p => p.isPopular && p.slug !== 'basic') || this.plans.find(p => p.slug !== 'basic');
if (defaultPlan) this.selectedPlanSlug = defaultPlan.slug;
}
if (this.userSubscription) { this.prepareConfirmationData(); this.currentStep = 3; }
} catch (error) { console.error('Initialization error:', error); }
finally { this.isLoadingPlans = false; this.isLoadingUserStatus = false; }
},
async fetchPlans() {
this.plansError = null;
try {
// --- TODO: Замінити симуляцію на реальний виклик API ---
console.log('API CALL: api.premium.getPlans');
// const response = await api.premium.getPlans();
// this.plans = response.data || [];
// --- Симуляція ---
await new Promise(resolve => setTimeout(resolve, 400));
this.plans = [
{ _id: 'plan_basic', nameKey: 'premium.basicPlanName', slug: 'basic', monthlyPrice: 0, yearlyPrice: 0, features: [ { textKey: 'premium.benefitFreeStories', available: true }, { textKey: 'premium.benefitLimitedBookmarks', available: true }, { textKey: 'premium.benefitCommunitySupport', available: true }, { textKey: 'premium.benefitNoAds', available: false }, { textKey: 'premium.benefitTranslation', available: false }, { textKey: 'premium.benefitExclusive', available: false }, { textKey: 'premium.benefitOffline', available: false } ], isPopular: false },
{ _id: 'plan_prem', nameKey: 'premium.premiumPlanName', slug: 'premium', monthlyPrice: 150, yearlyPrice: 1500, features: [ { textKey: 'premium.benefitAllStories', available: true }, { textKey: 'premium.benefitUnlimitedBookmarks', available: true }, { textKey: 'premium.benefitPrioritySupport', available: true }, { textKey: 'premium.benefitNoAds', available: true }, { textKey: 'premium.benefitTranslation', available: true }, { textKey: 'premium.benefitExclusive', available: false }, { textKey: 'premium.benefitOffline', available: false } ], isPopular: true },
{ _id: 'plan_vip', nameKey: 'premium.vipPlanName', slug: 'vip', monthlyPrice: 300, yearlyPrice: 3000, features: [ { textKey: 'premium.benefitAllStories', available: true }, { textKey: 'premium.benefitUnlimitedBookmarks', available: true }, { textKey: 'premium.benefitVIPSupport', available: true }, { textKey: 'premium.benefitNoAds', available: true }, { textKey: 'premium.benefitTranslation', available: true }, { textKey: 'premium.benefitExclusive', available: true }, { textKey: 'premium.benefitOffline', available: true } ], isPopular: false }
];
// --- Кінець симуляції ---
} catch (error) {
this.plansError = error.message || this.$store?.i18n?.t('premium.loadingPlansError');
console.error('Fetch plans error:', error);
}
},
async fetchUserSubscriptionStatus() { /* ... без змін, використовує симуляцію або API ... */ },
selectPlan(planSlug) { /* ... без змін ... */ },
toggleBillingCycle() { /* ... без змін ... */ },
proceedToPayment() { /* ... без змін ... */ },
async applyCoupon() { /* ... без змін, використовує симуляцію або API ... */ },
async submitPayment() { /* ... без змін, використовує симуляцію або API ... */ },
prepareConfirmationData() { /* ... без змін ... */ },
restartProcess() { /* ... без змін ... */ },
formatCardNumber() { /* ... без змін ... */ },
formatExpiryDate() { /* ... без змін ... */ },
formatCVC() { /* ... без змін ... */ },
async updateCryptoDetails() {
if (!this.selectedPlan) return;
console.log(`Updating crypto details for ${this.selectedCrypto}`);
const price = this.currentPlanPriceDetails.price; // Беремо ціну з урахуванням купона
let amount = 0; let address = '';
try {
// --- TODO: Замінити симуляцію на реальний виклик API ---
console.log(`API CALL: api.premium.getCryptoPaymentDetails(${this.selectedPlan._id}, ${this.isYearlyBilling}, ${this.selectedCrypto}, ${this.appliedCoupon?.code})`);
// const cryptoData = await api.premium.getCryptoPaymentDetails(this.selectedPlan._id, this.isYearlyBilling, this.selectedCrypto, this.appliedCoupon?.code);
// this.cryptoAddress = cryptoData.address;
// this.cryptoAmount = cryptoData.amount;
// --- Симуляція ---
await new Promise(resolve => setTimeout(resolve, 300));
if (this.selectedCrypto === 'BTC') { amount = (price / 2000000).toFixed(8); address = 'bc1q_TEST_xy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh'; }
else if (this.selectedCrypto === 'ETH') { amount = (price / 100000).toFixed(6); address = '0x_TEST_e0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'; }
else if (this.selectedCrypto === 'USDT') { amount = price.toFixed(2); address = 'TR_TEST_7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t'; }
this.cryptoAmount = amount; this.cryptoAddress = address;
// --- Кінець симуляції ---
} catch (err) {
this.paymentError = `Не вдалося отримати деталі для оплати ${this.selectedCrypto}: ${err.message}`;
this.cryptoAddress = ''; this.cryptoAmount = '';
console.error('Get crypto details error:', err);
}
},
async copyToClipboard(text) { /* ... без змін ... */ },
updateUserPremiumStatus(status) { /* ... без змін ... */ },
// Оновлена функція форматування ціни
formatPrice(price, currency = 'UAH') { // Додано параметр валюти
if (price === null || price === undefined || isNaN(price)) return `0 ${currency}`;
try {
const locale = this.$store?.i18n?.selectedLang || 'uk-UA';
// Використовуємо Intl.NumberFormat для правильного форматування
return new Intl.NumberFormat(locale, {
style: 'currency',
currency: currency,
minimumFractionDigits: currency === 'BTC' ? 6 : (currency === 'ETH' ? 4 : 2), // Більше знаків для крипти
maximumFractionDigits: currency === 'BTC' ? 8 : (currency === 'ETH' ? 6 : 2)
}).format(price);
} catch (error) {
console.warn('Error formatting price:', error);
// Запасний варіант
const formattedPrice = price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
return `${formattedPrice} ${currency}`;
}
}
}" x-init="init()">

<!-- Індикатор завантаження під час обробки платежу -->
<div x-show="isProcessingPayment" class="loading-overlay" x-transition.opacity>
    <div class="loading-spinner"></div>
    <p x-text="$store.i18n.t('premium.processingPayment')"></p>
</div>

<!-- Хедер -->
<header>
    <div class="container">
        <nav class="navbar">
            <a href="index.html" class="logo" aria-label="На головну">
                <span x-text="$store.i18n?.t('general.siteNamePart1') || 'Таємний'"></span><span style="color: var(--accent-red);" x-text="$store.i18n?.t('general.siteNamePart2') || 'Світ'"></span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html" x-text="$store.i18n.t('general.home')"></a></li>
                <li><a href="new-stories.html" x-text="$store.i18n.t('general.newStories')"></a></li>
                <li><a href="top-stories.html" x-text="$store.i18n.t('general.topStories')"></a></li>
                <li><a href="categories.html" x-text="$store.i18n.t('general.categories')"></a></li>
                <li><a href="authors.html" x-text="$store.i18n.t('general.authors')"></a></li>
            </ul>
            <div class="auth-buttons">
                <!-- Мовний перемикач -->
                <div class="lang-dropdown-container" x-data="{ open: false }" @click.away="open = false">
                    <div class="lang-dropdown-button" @click="open = !open" role="button" aria-haspopup="true" :aria-expanded="open">
                        <span x-text="$store?.i18n?.selectedLang?.toUpperCase() || 'UK'"></span>
                        <i class="fas fa-chevron-down" :class="{ 'rotate-180': open }" aria-hidden="true"></i>
                    </div>
                    <template x-if="$store?.i18n">
                        <div class="lang-dropdown-menu" x-show="open" x-transition role="menu" aria-orientation="vertical">
                            <template x-for="lang in $store.i18n.available" :key="lang.code">
                                <div class="lang-dropdown-item"
                                     :class="{ 'active': lang.code === $store.i18n.selectedLang }"
                                     @click="const newLang=lang.code; open=false; try{await $store.i18n.setLanguage(newLang);}catch(e){console.error('Lang switch error',e);}"
                                     role="menuitemradio" :aria-checked="lang.code === $store.i18n.selectedLang" tabindex="0"
                                     @keydown.enter.space.prevent="const newLang=lang.code; open=false; try{await $store.i18n.setLanguage(newLang);}catch(e){console.error('Lang switch error',e);}">
                                    <span x-text="lang.name"></span>
                                    <i x-show="lang.code === $store.i18n.selectedLang" class="fas fa-check" aria-hidden="true"></i>
                                </div>
                            </template>
                        </div>
                    </template>
                </div>
                <!-- Кнопки авторизації -->
                <template x-if="!isLoggedIn">
                    <div>
                        <a href="login.html" class="btn btn-outline"> <i class="fas fa-sign-in-alt"></i> <span x-text="$store.i18n.t('general.login')"></span> </a>
                        <a href="login.html?tab=register" class="btn btn-primary"> <i class="fas fa-user-plus"></i> <span x-text="$store.i18n.t('general.register')"></span> </a>
                    </div>
                </template>
                <template x-if="isLoggedIn">
                    <div>
                        <a href="profile.html" class="btn btn-outline"> <i class="fas fa-user"></i> <span x-text="$store.i18n.t('general.profile')"></span> </a>
                        <a href="#" @click.prevent="try { api.auth.logout(); window.location.reload(); } catch (e) { console.error('Logout error:', e); alert($store.i18n?.t('general.logoutError'));}" class="btn btn-primary">
                            <i class="fas fa-sign-out-alt"></i> <span x-text="$store.i18n.t('general.logout')"></span>
                        </a>
                    </div>
                </template>
            </div>
        </nav>
    </div>
</header>

<!-- Основний контент -->
<main>
    <!-- Хлібні крихти -->
    <div class="container">
        <div class="breadcrumbs">
            <a href="index.html" x-text="$store.i18n.t('general.home')"></a>
            <span class="separator">/</span>
            <span class="current" x-text="$store.i18n.t('general.premium')"></span>
        </div>
    </div>

    <!-- Hero секція -->
    <section class="premium-hero">
        <div class="container">
            <div class="premium-hero-content">
                <div class="premium-icon"><i class="fas fa-crown"></i></div>
                <h1 class="premium-title" x-text="$store.i18n.t('premium.heroTitle')"></h1>
                <p class="premium-subtitle" x-text="$store.i18n.t('premium.heroSubtitle')"></p>
                <div class="hero-features">
                    <div class="hero-feature"><i class="fas fa-lock-open"></i> <span x-text="$store.i18n.t('premium.heroFeatureAccess')"></span></div>
                    <div class="hero-feature"><i class="fas fa-language"></i> <span x-text="$store.i18n.t('premium.heroFeatureTranslate')"></span></div>
                    <div class="hero-feature"><i class="fas fa-ban"></i> <span x-text="$store.i18n.t('premium.heroFeatureNoAds')"></span></div> <!-- Змінено іконку -->
                    <div class="hero-feature"><i class="fas fa-star"></i> <span x-text="$store.i18n.t('premium.heroFeatureExclusive')"></span></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Індикатор завантаження планів/статусу -->
    <div x-show="isLoadingPlans || isLoadingUserStatus" class="container loading-indicator-small">
        <div class="loading-spinner-small"></div> <span x-text="$store.i18n.t('general.loadingData')"></span>
    </div>
    <!-- Помилка завантаження планів -->
    <div x-show="plansError" class="container error-message-small">
        <i class="fas fa-exclamation-circle"></i> <span x-text="plansError"></span>
        <button @click="fetchPlans()" class="btn btn-outline" x-text="$store.i18n.t('general.retryButton')"></button>
    </div>
    <!-- Помилка завантаження статусу підписки -->
    <div x-show="userStatusError" class="container error-message-small">
        <i class="fas fa-exclamation-circle"></i> <span x-text="userStatusError"></span>
        <button @click="fetchUserSubscriptionStatus()" class="btn btn-outline" x-text="$store.i18n.t('general.retryButton')"></button>
    </div>

    <!-- Інструкція зі статусною панеллю -->
    <section class="container steps-section" x-show="!isLoadingPlans && !isLoadingUserStatus && plans.length > 0">
        <div class="steps-container">
            <div class="step" :class="{ 'active': currentStep >= 1, 'completed': currentStep > 1 }">
                <div class="step-indicator"> <i x-show="currentStep > 1" class="fas fa-check"></i> <span x-show="currentStep <= 1">1</span> </div>
                <div class="step-details"> <h3 class="step-title" x-text="$store.i18n.t('premium.step1Title')"></h3> <p class="step-description" x-text="$store.i18n.t('premium.step1Desc')"></p> </div>
            </div>
            <div class="step-connector" :class="{ 'active': currentStep > 1 }"></div>
            <div class="step" :class="{ 'active': currentStep >= 2, 'completed': currentStep > 2 }">
                <div class="step-indicator"> <i x-show="currentStep > 2" class="fas fa-check"></i> <span x-show="currentStep <= 2">2</span> </div>
                <div class="step-details"> <h3 class="step-title" x-text="$store.i18n.t('premium.step2Title')"></h3> <p class="step-description" x-text="$store.i18n.t('premium.step2Desc')"></p> </div>
            </div>
            <div class="step-connector" :class="{ 'active': currentStep > 2 }"></div>
            <div class="step" :class="{ 'active': currentStep >= 3 }">
                <div class="step-indicator"> <i x-show="currentStep >= 3" class="fas fa-check"></i> <span x-show="currentStep < 3">3</span> </div>
                <div class="step-details"> <h3 class="step-title" x-text="$store.i18n.t('premium.step3Title')"></h3> <p class="step-description" x-text="$store.i18n.t('premium.step3Desc')"></p> </div>
            </div>
        </div>
    </section>

    <!-- Плани підписки -->
    <section class="plans-section" x-show="currentStep === 1 && !isLoadingPlans && !isLoadingUserStatus && plans.length > 0">
        <div class="container">
            <h2 class="section-title" x-text="$store.i18n.t('premium.plansTitle')"></h2>

            <div class="billing-toggle">
                <span :class="{ 'active': !isYearlyBilling }" x-text="$store.i18n.t('premium.monthly')"></span>
                <button type="button" class="toggle-switch" @click="toggleBillingCycle()" role="switch" :aria-checked="isYearlyBilling.toString()" tabindex="0" @keydown.enter.space.prevent="toggleBillingCycle()" :aria-label="isYearlyBilling ? $store.i18n.t('premium.switchToMonthly') : $store.i18n.t('premium.switchToYearly')">
                    <div class="toggle-slider"></div>
                </button>
                <span :class="{ 'active': isYearlyBilling }" x-text="$store.i18n.t('premium.yearly')"></span>
                <div class="discount-badge" x-show="isYearlyBilling && currentPlanPriceDetails.yearlySavingsPercent > 0" x-text="$store.i18n.t('premium.yearlySave', { percent: currentPlanPriceDetails.yearlySavingsPercent })"></div>
            </div>

            <div class="plans-grid">
                <template x-for="plan in plans" :key="plan.slug">
                    <div class="plan-card" :class="{ 'selected': selectedPlanSlug === plan.slug, 'popular': plan.isPopular }" @click="selectPlan(plan.slug)" tabindex="0" @keydown.enter.space.prevent="selectPlan(plan.slug)" :aria-labelledby="`plan-name-${plan.slug}`">
                        <div x-show="plan.isPopular" class="popular-badge" x-text="$store.i18n.t('premium.recommendedBadge')"></div>
                        <div class="plan-header">
                            <h3 class="plan-name" :id="`plan-name-${plan.slug}`" x-text="$store.i18n.t(plan.nameKey)"></h3>
                            <div class="plan-price">
                                <span class="currency">₴</span> <!-- Змінено на UAH -->
                                <span class="amount" x-text="isYearlyBilling ? plan.yearlyPrice.toLocaleString($store.i18n.selectedLang || 'uk-UA') : plan.monthlyPrice.toLocaleString($store.i18n.selectedLang || 'uk-UA')"></span>
                                <span class="period" x-text="isYearlyBilling ? $store.i18n.t('premium.perYear') : $store.i18n.t('premium.perMonth')"></span>
                            </div>
                            <div class="price-detail" x-show="isYearlyBilling && plan.yearlyPrice && plan.monthlyPrice && plan.monthlyPrice > 0" x-text="$store.i18n.t('premium.monthlyEquivalent', { price: (plan.yearlyPrice / 12).toFixed(0) })"></div>
                            <div class="price-detail" x-show="!isYearlyBilling || !(plan.yearlyPrice && plan.monthlyPrice)" style="min-height: 1.2em;"> </div> <!-- Заглушка для висоти -->
                        </div>
                        <div class="plan-features">
                            <template x-for="feature in plan.features" :key="feature.textKey">
                                <div class="plan-feature" :class="{ 'inactive': !feature.available }">
                                    <i :class="feature.available ? 'fas fa-check' : 'fas fa-times'" aria-hidden="true"></i>
                                    <span x-text="$store.i18n.t(feature.textKey)"></span>
                                </div>
                            </template>
                        </div>
                        <div class="plan-action" x-show="plan.slug !== 'basic'">
                            <button type="button" class="btn" :class="selectedPlanSlug === plan.slug ? 'btn-primary' : 'btn-outline'" @click.stop="selectPlan(plan.slug)" :aria-pressed="selectedPlanSlug === plan.slug">
                                <span x-text="selectedPlanSlug === plan.slug ? $store.i18n.t('premium.selected') : $store.i18n.t('premium.selectPlanButton')"></span>
                            </button>
                        </div>
                    </div>
                </template>
            </div>

            <div class="selected-plan-info" x-show="selectedPlan && selectedPlan.slug !== 'basic'" x-transition>
                <div class="selected-plan-details">
                    <h3>
                        <span x-text="$store.i18n.t('premium.selectedPlanLabel')"></span>
                        <strong x-text="currentPlanName"></strong>
                    </h3>
                    <p>
                        <strong x-text="isYearlyBilling ? $store.i18n.t('premium.yearlySubscription') : $store.i18n.t('premium.monthlySubscription')"></strong> -
                        <!-- Використовуємо formatPrice -->
                        <span x-text="formatPrice(currentPlanPriceDetails.price)"></span>
                        <span x-text="currentPlanPriceDetails.period"></span>
                        <template x-if="isYearlyBilling && currentPlanPriceDetails.yearlySavingsPercent > 0 && !appliedCoupon">
                            <span class="discount-info" x-text="$store.i18n.t('premium.yearlySave', { percent: currentPlanPriceDetails.yearlySavingsPercent })"></span>
                        </template>
                        <template x-if="appliedCoupon">
                                <span class="discount-info" style="background-color: rgba(0, 150, 0, 0.1); color: #4cd964;">
                                    <span x-text="$store.i18n.t('premium.discountLabel')"></span>
                                    <!-- Форматуємо знижку -->
                                    <span x-text="formatPrice(currentPlanPriceDetails.couponDiscount)"></span>
                                </span>
                        </template>
                    </p>
                </div>
                <button class="btn btn-primary continue-btn" @click="proceedToPayment()">
                    <span x-text="$store.i18n.t('premium.continueButton')"></span> <i class="fas fa-arrow-right" aria-hidden="true"></i>
                </button>
            </div>

            <div class="plan-guarantee">
                <i class="fas fa-shield-alt" aria-hidden="true"></i>
                <p x-text="$store.i18n.t('premium.guaranteeText')"></p>
            </div>
        </div>
    </section>

    <!-- Форма оплати -->
    <section id="payment-form-section" class="payment-section" x-show="currentStep === 2" x-transition>
        <div class="container">
            <h2 class="section-title" x-text="$store.i18n.t('premium.paymentTitle')"></h2>

            <!-- Помилка оплати загальна -->
            <div x-show="paymentError" class="error-message-small" style="margin-bottom: 1rem;" role="alert" aria-live="assertive">
                <i class="fas fa-exclamation-circle" aria-hidden="true"></i> <span x-text="paymentError"></span>
                <button @click="paymentError = null" class="btn btn-outline" style="margin-left: auto; padding: 0.3rem 0.8rem; font-size: 0.8rem;" x-text="$store.i18n.t('general.close')"></button>
            </div>

            <div class="payment-summary">
                <div class="summary-details">
                    <div class="summary-plan">
                        <h4><span x-text="$store.i18n.t('premium.confirmationPlanLabel')"></span> "<span x-text="currentPlanName"></span>"</h4>
                        <p x-text="isYearlyBilling ? $store.i18n.t('premium.yearlySubscription') : $store.i18n.t('premium.monthlySubscription')"></p>
                    </div>
                    <div class="summary-price">
                        <span x-show="appliedCoupon" style="text-decoration: line-through; font-size: 1.5rem; color: var(--secondary-text); margin-right: 10px;" x-text="formatPrice(currentPlanPriceDetails.rawPrice)"></span>
                        <span x-text="formatPrice(currentPlanPriceDetails.price)"></span>
                    </div>
                </div>
                <div class="coupon-section">
                    <form class="coupon-form" @submit.prevent="applyCoupon()">
                        <input type="text" x-model="couponCode" :placeholder="$store.i18n.t('premium.promoCodePlaceholder')" class="coupon-input" :disabled="isApplyingCoupon" aria-label="Промокод">
                        <button type="submit" class="btn btn-outline coupon-btn" :disabled="isApplyingCoupon || !couponCode.trim()" :aria-busy="isApplyingCoupon">
                            <span x-show="!isApplyingCoupon" x-text="$store.i18n.t('premium.applyButton')"></span>
                            <span x-show="isApplyingCoupon"><i class="fas fa-spinner fa-spin" aria-hidden="true"></i> <span x-text="$store.i18n.t('premium.applying')"></span></span>
                        </button>
                    </form>
                    <div x-show="couponError" class="form-notification error" role="alert"> <i class="fas fa-times-circle" aria-hidden="true"></i> <span x-text="couponError"></span> </div>
                    <div x-show="couponSuccessMessage" class="form-notification success" role="status"> <i class="fas fa-check-circle" aria-hidden="true"></i> <span x-text="couponSuccessMessage"></span> </div>
                </div>
            </div>

            <div class="payment-form">
                <div class="form-tabs" role="tablist">
                    <button type="button" @click="activePaymentMethod = 'card'" class="form-tab" :class="{ 'active': activePaymentMethod === 'card' }" role="tab" :aria-selected="activePaymentMethod === 'card'" aria-controls="card-payment-panel">
                        <i class="fas fa-credit-card" aria-hidden="true"></i> <span x-text="$store.i18n.t('premium.paymentMethodCard')"></span>
                    </button>
                    <button type="button" @click="activePaymentMethod = 'crypto'; updateCryptoDetails();" class="form-tab" :class="{ 'active': activePaymentMethod === 'crypto' }" role="tab" :aria-selected="activePaymentMethod === 'crypto'" aria-controls="crypto-payment-panel">
                        <i class="fab fa-bitcoin" aria-hidden="true"></i> <span x-text="$store.i18n.t('premium.paymentMethodCrypto')"></span>
                    </button>
                </div>

                <!-- Форма оплати карткою -->
                <div id="card-payment-panel" role="tabpanel" aria-labelledby="tab-card" x-show="activePaymentMethod === 'card'" x-transition>
                    <form class="card-form" @submit.prevent="submitPayment()" novalidate>
                        <div class="form-group">
                            <label for="cardNumber" class="form-label" x-text="$store.i18n.t('premium.cardNumberLabel')"></label>
                            <div class="card-input-group">
                                <input type="text" id="cardNumber" x-model="card.number" @input="formatCardNumber()" maxlength="19" inputmode="numeric" :placeholder="$store.i18n.t('premium.cardNumberPlaceholder')" required aria-required="true" :aria-invalid="!!cardError.number" aria-describedby="card-number-error">
                                <div class="card-icons" aria-hidden="true"> <i class="fab fa-cc-visa"></i> <i class="fab fa-cc-mastercard"></i> </div>
                            </div>
                            <span id="card-number-error" x-show="cardError.number" class="error-message-inline" x-text="cardError.number" role="alert"></span>
                        </div>
                        <div class="form-group">
                            <label for="cardName" class="form-label" x-text="$store.i18n.t('premium.cardNameLabel')"></label>
                            <input type="text" id="cardName" x-model="card.name" :placeholder="$store.i18n.t('premium.cardNamePlaceholder')" required aria-required="true" :aria-invalid="!!cardError.name" aria-describedby="card-name-error" autocomplete="cc-name">
                            <span id="card-name-error" x-show="cardError.name" class="error-message-inline" x-text="cardError.name" role="alert"></span>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cardExpiry" class="form-label" x-text="$store.i18n.t('premium.cardExpiryLabel')"></label>
                                <input type="text" id="cardExpiry" x-model="card.expiry" @input="formatExpiryDate()" maxlength="5" inputmode="numeric" :placeholder="$store.i18n.t('premium.cardExpiryPlaceholder')" required aria-required="true" :aria-invalid="!!cardError.expiry" aria-describedby="card-expiry-error" autocomplete="cc-exp">
                                <span id="card-expiry-error" x-show="cardError.expiry" class="error-message-inline" x-text="cardError.expiry" role="alert"></span>
                            </div>
                            <div class="form-group">
                                <label for="cardCVC" class="form-label" x-text="$store.i18n.t('premium.cardCVCLabel')"></label>
                                <input type="password" inputmode="numeric" id="cardCVC" x-model="card.cvc" @input="formatCVC()" maxlength="4" :placeholder="$store.i18n.t('premium.cardCVCPlaceholder')" required autocomplete="cc-csc" aria-required="true" :aria-invalid="!!cardError.cvc" aria-describedby="card-cvc-error">
                                <span id="card-cvc-error" x-show="cardError.cvc" class="error-message-inline" x-text="cardError.cvc" role="alert"></span>
                            </div>
                        </div>
                        <div class="form-agreement">
                            <input type="checkbox" id="termsAgreementCard" x-model="termsAgreed" required aria-required="true">
                            <label for="termsAgreementCard" x-html="$store.i18n.t('premium.agreeTerms', { termsLink: `<a href='terms-page.html' target='_blank'>${$store.i18n.t('premium.termsLink')}</a>`, privacyLink: `<a href='privacy-policy.html' target='_blank'>${$store.i18n.t('premium.privacyLink')}</a>` })"></label>
                        </div>
                        <div class="form-action">
                            <button type="submit" class="btn btn-primary pay-btn" :class="{ 'processing': isProcessingPayment }" :disabled="isProcessingPayment || !termsAgreed" :aria-busy="isProcessingPayment">
                                <span x-show="!isProcessingPayment" x-text="$store.i18n.t('premium.payButton', { amount: formatPrice(currentPlanPriceDetails.price) })"></span>
                                <span x-show="isProcessingPayment"><span x-text="$store.i18n.t('premium.processingPayment')"></span></span>
                            </button>
                        </div>
                        <div class="form-security">
                            <div class="security-item"><i class="fas fa-lock" aria-hidden="true"></i> <span x-text="$store.i18n.t('premium.securePayment')"></span></div>
                            <!-- Додати інші іконки платіжних систем, якщо потрібно -->
                        </div>
                    </form>
                </div>

                <!-- Форма оплати криптовалютою -->
                <div id="crypto-payment-panel" role="tabpanel" aria-labelledby="tab-crypto" x-show="activePaymentMethod === 'crypto'" x-transition>
                    <div class="crypto-payment">
                        <div class="crypto-options" role="radiogroup" aria-label="Вибір криптовалюти">
                            <label class="crypto-option">
                                <input type="radio" name="cryptoType" value="BTC" x-model="selectedCrypto" @change="updateCryptoDetails()" role="radio" aria-checked="selectedCrypto === 'BTC'">
                                <i class="fab fa-bitcoin" aria-hidden="true"></i> Bitcoin
                            </label>
                            <label class="crypto-option">
                                <input type="radio" name="cryptoType" value="ETH" x-model="selectedCrypto" @change="updateCryptoDetails()" role="radio" aria-checked="selectedCrypto === 'ETH'">
                                <i class="fab fa-ethereum" aria-hidden="true"></i> Ethereum
                            </label>
                            <label class="crypto-option">
                                <input type="radio" name="cryptoType" value="USDT" x-model="selectedCrypto" @change="updateCryptoDetails()" role="radio" aria-checked="selectedCrypto === 'USDT'">
                                <i class="fas fa-dollar-sign" aria-hidden="true"></i> USDT (TRC20)
                            </label>
                        </div>
                        <div class="crypto-info" x-show="cryptoAddress">
                            <div class="qr-code">
                                <!-- TODO: Вставити реальний QR-код -->
                                <div class="qr-placeholder" :title="$store.i18n.t('premium.qrCodeTitle')">
                                    <i class="fas fa-qrcode" aria-hidden="true"></i>
                                </div>
                            </div>
                            <div class="wallet-address">
                                <p><strong x-text="$store.i18n.t('premium.cryptoSendLabel', {amount: cryptoAmount, currency: selectedCrypto})"></strong> <span x-text="$store.i18n.t('premium.cryptoToAddress')"></span></p>
                                <div class="address-box">
                                    <code x-text="cryptoAddress"></code>
                                    <button type="button" @click="copyToClipboard(cryptoAddress)" class="copy-btn" :title="$store.i18n.t('premium.cryptoCopyTooltip')" :aria-label="$store.i18n.t('premium.cryptoCopyTooltip')"> <i class="fas fa-copy" aria-hidden="true"></i> </button>
                                </div>
                                <p class="crypto-note" x-text="$store.i18n.t('premium.cryptoNote')"></p>
                            </div>
                        </div>
                        <div x-show="!cryptoAddress && activePaymentMethod === 'crypto'" class="loading-indicator-small" x-text="$store.i18n.t('premium.loadingPaymentDetails')"></div>
                        <div class="form-agreement" style="margin-top: 1rem;">
                            <input type="checkbox" id="termsAgreementCrypto" x-model="termsAgreed" required aria-required="true">
                            <label for="termsAgreementCrypto" x-html="$store.i18n.t('premium.agreeTerms', { termsLink: `<a href='terms-page.html' target='_blank'>${$store.i18n.t('premium.termsLink')}</a>`, privacyLink: `<a href='privacy-policy.html' target='_blank'>${$store.i18n.t('premium.privacyLink')}</a>` })"></label>
                        </div>
                        <div class="form-action">
                            <button type="button" class="btn btn-primary pay-btn" :class="{ 'processing': isProcessingPayment }" @click="submitPayment()" :disabled="isProcessingPayment || !isCryptoFormValid" :aria-busy="isProcessingPayment">
                                <span x-show="!isProcessingPayment" x-text="$store.i18n.t('premium.cryptoConfirmPaymentButton')"></span>
                                <span x-show="isProcessingPayment"><span x-text="$store.i18n.t('premium.cryptoCheckingPayment')"></span></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Підтвердження оплати -->
    <section id="confirmation-section" class="confirmation-section" x-show="currentStep === 3" x-transition>
        <div class="container">
            <div class="confirmation-card" x-show="paymentResult">
                <div class="confirmation-icon"><i class="fas fa-check-circle" aria-hidden="true"></i></div>
                <h2 class="confirmation-title" x-text="$store.i18n.t('premium.confirmationTitle')"></h2>
                <p class="confirmation-message" x-html="$store.i18n.t('premium.confirmationMessage', { billingCycle: paymentResult?.billingCycle.toLowerCase(), planName: paymentResult?.planName }) || 'Підписка активована.'"></p>
                <dl class="confirmation-details"> <!-- Використовуємо dl -->
                    <div class="confirmation-detail"> <dt class="detail-label" x-text="$store.i18n.t('premium.confirmationPlanLabel')"></dt> <dd class="detail-value" x-text="paymentResult?.planName"></dd> </div>
                    <div class="confirmation-detail"> <dt class="detail-label" x-text="$store.i18n.t('premium.confirmationPeriodLabel')"></dt> <dd class="detail-value" x-text="paymentResult?.billingCycle"></dd> </div>
                    <div class="confirmation-detail"> <dt class="detail-label" x-text="$store.i18n.t('premium.confirmationAmountLabel')"></dt> <dd class="detail-value"><span x-text="formatPrice(paymentResult?.amount || 0)"></span></dd> </div>
                    <div class="confirmation-detail"> <dt class="detail-label" x-text="$store.i18n.t('premium.confirmationMethodLabel')"></dt> <dd class="detail-value" x-text="paymentResult?.paymentMethod"></dd> </div>
                    <div class="confirmation-detail"> <dt class="detail-label" x-text="$store.i18n.t('premium.confirmationStatusLabel')"></dt> <dd class="detail-value success" x-text="paymentResult?.status"></dd> </div>
                    <div class="confirmation-detail"> <dt class="detail-label" x-text="$store.i18n.t('premium.confirmationNextBillingLabel')"></dt> <dd class="detail-value" x-text="paymentResult?.nextBillingDate"></dd> </div>
                </dl>
                <div class="confirmation-actions">
                    <a href="index.html" class="btn btn-primary" x-text="$store.i18n.t('premium.confirmationActionHome')"></a>
                    <a href="profile.html" class="btn btn-outline" x-text="$store.i18n.t('premium.confirmationActionProfile')"></a>
                </div>
                <div class="confirmation-help">
                    <p x-html="$store.i18n.t('premium.confirmationHelpText', { link: `<a href='contact.html'>${$store.i18n.t('premium.confirmationHelpLink')}</a>` }) || `Маєте питання? <a href='contact.html'>Зв'яжіться з підтримкою</a>`"></p>
                </div>
            </div>
            <div x-show="currentStep === 3 && !paymentResult" class="loading-indicator-small" x-text="$store.i18n.t('premium.processingInfo')"></div>
        </div>
    </section>

    <!-- Інші секції (Переваги, Відгуки, FAQ, CTA) -->
    <section class="benefits-section" x-show="currentStep !== 3">
        <div class="container">
            <h2 class="section-title" x-text="$store.i18n.t('premium.benefitsTitle')"></h2>
            <div class="benefits-grid">
                <div class="benefit-card"> <div class="benefit-icon"><i class="fas fa-book-open"></i></div> <h3 class="benefit-title" x-text="$store.i18n.t('premium.benefitTitleAccess')"></h3> <p class="benefit-description" x-text="$store.i18n.t('premium.benefitDescAccess')"></p> </div>
                <div class="benefit-card"> <div class="benefit-icon"><i class="fas fa-language"></i></div> <h3 class="benefit-title" x-text="$store.i18n.t('premium.benefitTitleTranslate')"></h3> <p class="benefit-description" x-text="$store.i18n.t('premium.benefitDescTranslate')"></p> </div>
                <div class="benefit-card"> <div class="benefit-icon"><i class="fas fa-ban"></i></div> <h3 class="benefit-title" x-text="$store.i18n.t('premium.benefitTitleNoAds')"></h3> <p class="benefit-description" x-text="$store.i18n.t('premium.benefitDescNoAds')"></p> </div>
                <div class="benefit-card"> <div class="benefit-icon"><i class="fas fa-star"></i></div> <h3 class="benefit-title" x-text="$store.i18n.t('premium.benefitTitleExclusive')"></h3> <p class="benefit-description" x-text="$store.i18n.t('premium.benefitDescExclusive')"></p> </div>
                <div class="benefit-card"> <div class="benefit-icon"><i class="fas fa-download"></i></div> <h3 class="benefit-title" x-text="$store.i18n.t('premium.benefitTitleOffline')"></h3> <p class="benefit-description" x-text="$store.i18n.t('premium.benefitDescOffline')"></p> </div>
                <div class="benefit-card"> <div class="benefit-icon"><i class="fas fa-headset"></i></div> <h3 class="benefit-title" x-text="$store.i18n.t('premium.benefitTitleSupport')"></h3> <p class="benefit-description" x-text="$store.i18n.t('premium.benefitDescSupport')"></p> </div>
            </div>
        </div>
    </section>

    <section class="testimonials-section" x-show="currentStep === 1">
        <div class="container">
            <h2 class="section-title" x-text="$store.i18n.t('premium.testimonialsTitle')"></h2>
            <div class="testimonials-grid">
                <figure class="testimonial-card"> <blockquote class="testimonial-text" x-text="$store.i18n.t('premium.testimonial1Text')"></blockquote> <div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div> <figcaption class="testimonial-author"> <div class="author-avatar" style="background-image: url('https://source.unsplash.com/random/100x100/?woman,portrait')"></div> <div> <div class="author-name" x-text="$store.i18n.t('premium.testimonial1Author')"></div> <div class="subscription-type" x-text="$store.i18n.t('premium.premiumPlanName')"></div> </div> </figcaption> </figure>
                <figure class="testimonial-card"> <blockquote class="testimonial-text" x-text="$store.i18n.t('premium.testimonial2Text')"></blockquote> <div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i></div> <figcaption class="testimonial-author"> <div class="author-avatar" style="background-image: url('https://source.unsplash.com/random/100x100/?man,profile')"></div> <div> <div class="author-name" x-text="$store.i18n.t('premium.testimonial2Author')"></div> <div class="subscription-type" x-text="$store.i18n.t('premium.vipPlanName')"></div> </div> </figcaption> </figure>
                <figure class="testimonial-card"> <blockquote class="testimonial-text" x-text="$store.i18n.t('premium.testimonial3Text')"></blockquote> <div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div> <figcaption class="testimonial-author"> <div class="author-avatar" style="background-image: url('https://source.unsplash.com/random/100x100/?person,face')"></div> <div> <div class="author-name" x-text="$store.i18n.t('premium.testimonial3Author')"></div> <div class="subscription-type" x-text="$store.i18n.t('premium.premiumPlanName')"></div> </div> </figcaption> </figure>
            </div>
        </div>
    </section>

    <section class="faq-section" x-show="currentStep !== 3">
        <div class="container">
            <h2 class="section-title" x-text="$store.i18n.t('premium.faqTitle')"></h2>
            <div class="faq-list">
                <div class="faq-item" x-data="{ open: false }"> <button type="button" class="faq-question" @click="open = !open" :aria-expanded="open" aria-controls="faq-answer-1"> <h3 x-text="$store.i18n.t('premium.faqQ1')"></h3> <span class="faq-toggle" aria-hidden="true"><i :class="open ? 'fas fa-times' : 'fas fa-plus'"></i></span> </button> <div class="faq-answer" x-show="open" x-collapse id="faq-answer-1" role="region"> <p x-text="$store.i18n.t('premium.faqA1')"></p> </div> </div>
                <div class="faq-item" x-data="{ open: false }"> <button type="button" class="faq-question" @click="open = !open" :aria-expanded="open" aria-controls="faq-answer-2"> <h3 x-text="$store.i18n.t('premium.faqQ2')"></h3> <span class="faq-toggle" aria-hidden="true"><i :class="open ? 'fas fa-times' : 'fas fa-plus'"></i></span> </button> <div class="faq-answer" x-show="open" x-collapse id="faq-answer-2" role="region"> <p x-text="$store.i18n.t('premium.faqA2')"></p> </div> </div>
                <div class="faq-item" x-data="{ open: false }"> <button type="button" class="faq-question" @click="open = !open" :aria-expanded="open" aria-controls="faq-answer-3"> <h3 x-text="$store.i18n.t('premium.faqQ3')"></h3> <span class="faq-toggle" aria-hidden="true"><i :class="open ? 'fas fa-times' : 'fas fa-plus'"></i></span> </button> <div class="faq-answer" x-show="open" x-collapse id="faq-answer-3" role="region"> <p x-text="$store.i18n.t('premium.faqA3')"></p> </div> </div>
                <div class="faq-item" x-data="{ open: false }"> <button type="button" class="faq-question" @click="open = !open" :aria-expanded="open" aria-controls="faq-answer-4"> <h3 x-text="$store.i18n.t('premium.faqQ4')"></h3> <span class="faq-toggle" aria-hidden="true"><i :class="open ? 'fas fa-times' : 'fas fa-plus'"></i></span> </button> <div class="faq-answer" x-show="open" x-collapse id="faq-answer-4" role="region"> <p x-text="$store.i18n.t('premium.faqA4')"></p> </div> </div>
            </div>
        </div>
    </section>

    <section class="cta-section" x-show="currentStep === 1">
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title" x-text="$store.i18n.t('premium.ctaTitle')"></h2>
                <p class="cta-description" x-text="$store.i18n.t('premium.ctaDescription')"></p>
                <button class="btn btn-primary cta-button" @click="document.querySelector('.plans-section').scrollIntoView({ behavior: 'smooth' })" x-text="$store.i18n.t('premium.ctaButton')"></button>
            </div>
        </div>
    </section>

</main>

<!-- Footer -->
<footer>
    <div class="container">
        <!-- Код футера з i18n, як в index.html -->
        <div class="footer-content"> <div class="footer-section footer-about"> <h4 x-text="$store.i18n.t('general.about')"></h4> <p x-text="$store.i18n.t('general.aboutText')"></p> <div class="social-links"> <a href="#" class="social-link" :title="$store.i18n.t('general.shareFacebook')"><i class="fab fa-facebook-f"></i></a> <a href="#" class="social-link" :title="$store.i18n.t('general.shareTelegram')"><i class="fab fa-telegram-plane"></i></a> <a href="#" class="social-link" title="Instagram"><i class="fab fa-instagram"></i></a> </div> </div> <div class="footer-section"> <h4 x-text="$store.i18n.t('general.navigation')"></h4> <ul> <li><a href="index.html" x-text="$store.i18n.t('general.home')"></a></li> <li><a href="categories.html" x-text="$store.i18n.t('general.categories')"></a></li> <li><a href="new-stories.html" x-text="$store.i18n.t('general.newStories')"></a></li> <li><a href="top-stories.html" x-text="$store.i18n.t('general.topStories')"></a></li> <li><a href="authors.html" x-text="$store.i18n.t('general.authors')"></a></li> </ul> </div> <div class="footer-section"> <h4 x-text="$store.i18n.t('general.support')"></h4> <ul> <li><a href="faq.html" x-text="$store.i18n.t('faq.title')"></a></li> <li><a href="contact.html" x-text="$store.i18n.t('contact.title')"></a></li> <li><a href="terms-page.html" x-text="$store.i18n.t('general.terms')"></a></li> <li><a href="privacy-policy.html" x-text="$store.i18n.t('general.privacy')"></a></li> </ul> </div> <div class="footer-section"> <h4 x-text="$store.i18n.t('general.join')"></h4> <ul> <li><a href="login.html" x-text="$store.i18n.t('general.login')"></a></li> <li><a href="login.html?tab=register" x-text="$store.i18n.t('general.register')"></a></li> <li><a href="premium.html" x-text="$store.i18n.t('general.premium')"></a></li> <li><a href="create_story.html" x-text="$store.i18n.t('createStory.title')"></a></li> </ul> </div> </div>
        <div class="footer-bottom"> © <span x-text="new Date().getFullYear()"></span> <span x-text="$store.i18n.t('general.copyright')"></span>. <span x-text="$store.i18n.t('general.allRightsReserved')"></span>. 18+ <br> <a href="terms-page.html" x-text="$store.i18n.t('general.terms')"></a> | <a href="privacy-policy.html" x-text="$store.i18n.t('general.privacy')"></a> </div>
    </div>
</footer>

<!-- Елемент сповіщення -->
<div x-show="notificationVisible"
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-start="opacity-0 translate-y-2"
     x-transition:enter-end="opacity-100 translate-y-0"
     x-transition:leave="transition ease-in duration-300"
     x-transition:leave-start="opacity-100 translate-y-0"
     x-transition:leave-end="opacity-0 -translate-y-full"
     class="notification"
     :class="{ 'show': notificationVisible, 'success': notificationType === 'success', 'error': notificationType === 'error' }"
     style="display: none;"
     id="global-notification"
     role="alert"
     aria-live="assertive">
    <span x-text="notificationMessage"></span>
</div>

</body>
</html>